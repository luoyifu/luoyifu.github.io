---
layout:     post
title:      "因为文件超过100M无法push到github上的问题"
subtitle:   "问题遇到和解决始末"
date:       2018-10-21 22:00:00
author:     "Luo Yifu"
header-img: "img/post-bg-2015.jpg"
tags:
    - github
    - push
    - bug
---
# 因为文件超过100M而无法push到github上的问题及解决始末
昨天晚上在写了半天代码后，要push到github上时遇到了一个问题，说因为我的push中有文件超过100M而无法push，需要修改后再push。
一开始，我认为是个小问题。后来证明我大错特错了。现在，满心郁闷的吐槽一下整个问题的解决过程。
* Try 1: 删除了文件再push。不行。
我上网查了一下资料，因为这个超过100m的文件不是最近一次commit添加的（怪我，许多次commit才push一次），而是之前commit过的。这就需要把关于这个文件的所有历史commit记录全部清除掉。
* Try 2:BFG工具
昨晚因为比较晚，所以问题没解决就取睡觉了。今天早上心里挂念着这个问题，因为今天7点要出门，一早上5点半就爬了起来，然后在电脑前折腾了快一个小时，直到快出门才惊觉没有洗脸刷牙。
这一早上，我继续上网查找解决办法，发现一个叫[BFG](https://rtyley.github.io/bfg-repo-cleaner/)的工具。阅读了一下简单[教程](https://blog.csdn.net/yss28/article/details/52404504)[教程2](https://www.cnblogs.com/qmmq/p/4604862.html)，继续尝试。依旧失败。卡在git 显示我的repository不是有效的（xxx is not a valid git repository）
* Try 3:
晚上回到家，重回电脑前，无论如何也要解决这个问题，我将这个依旧悬而未决的问题归咎于昨晚和今早时间太仓促，没法一个方法一个方法的尝试。早上遇到的问题再我重新尝试后继续出现。我怀疑是否是因为我的项目代码仓库无法识别，所以选择重新初始化代码仓库。
尝试重新init repository:进入我的项目仓库所在文件夹，使用 '''git init ''' 命令重新初始化我的repository，依旧显示不是有效的。
* Try 4: 试图修改push文件大小的限制
既然目前看来修改commit history的尝试一直是失败的，我想到是否可以修改文件大小限制规则。
查到了许多办法，首先尝试了这个网上比较常见的办法：[修改config文件](https://blog.csdn.net/u010545480/article/details/52995794)。嗯，不出所料，依旧不行。
这里有一篇比较系统的[方法介绍](https://blog.csdn.net/qq_33404395/article/details/80263709)，另外他还提出了另一个办法，因为实在太累了，这个办法我没有尝试。
* Try 5:
经历了两个晚上的摸索，已经再这个事情上筋疲力尽了（比我写两晚上代码累多了，让人崩溃）。最后想到，始终push不上去的原因是.git 文件夹中应该有history的记录信息，如果更改这个文件，或者甚至重新初始化整个git仓库应该就可以了。于是，简单粗暴的方法来了——
1. 进入我的项目所在仓库目录，删除.git文件夹
2. 此时在github上这个项目已经失效了。没事，进入命令行模式，还是在这个目录下，重新初始化git仓库，使用'''git init'''命令。好了，这个仓库复活了。
3. 使用github客户端已经可以重新添加这个项目了。接下来在云端github上删除这个项目，然后再在自己这端重新push上去！一切解决。
这个方法存在一个大问题，就是之前的push和commit记录会消失（还好我的项目是自己在做，所以不用担心这个问题。）

这件事给了我一个教训，每次commit后一定要push！！

